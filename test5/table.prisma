//表结构视图 https://prisma-editor.bahumaish.com/schema/17244
generator client {
  provider = "prisma-client-js"
}

datasource db {
  provider = "sqlite"
  url      = "file:./sqlite.db"
}

// 1. 用户表
model sys_user {
  id         String       @id @default(uuid())
  phone      String       @unique
  password   String       @default("123456")
  name       String
  remark     String?
  sys_depart sys_depart[]
}

// 2. 组织表 (既表示部门又表示角色)
model sys_depart {
  id        String       @id @default(uuid())
  name      String
  remark    String?
  parent_id String? // 自关联
  is_depart Boolean      @default(true) // 是否是组织，如果为false就相当于角色
  parent    sys_depart?  @relation("self_sys_depart", fields: [parent_id], references: [id])
  children  sys_depart[] @relation("self_sys_depart")
  sys_user  sys_user[]
  sys_menu  sys_menu[]
}

// 3. 菜单表
model sys_menu {
  id     String  @id @default(uuid())
  name   String
  path   String?
  remark String?

  is_permiss Boolean      @default(false)
  is_view    Boolean      @default(false)
  is_find    Boolean      @default(false)
  is_save    Boolean      @default(false)
  is_del     Boolean      @default(false)
  parent_id  String? // 自关联
  parent     sys_menu?    @relation("self_sys_menu", fields: [parent_id], references: [id])
  children   sys_menu[]   @relation("self_sys_menu")
  sys_depart sys_depart[]
}
